function getSheetStatusCount(){return $.ajax({url:BASE_URI+"/monitoring/count_sheet_per_status_per_subject/",type:"GET",dataType:"json"})}$((function(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(drawChart)}));const countOccurrences=(arr,val)=>arr.reduce((a,v)=>v===val?a+1:a,0);function drawChart(){$.when(getSheetStatusCount()).then((function(response){if(response.is_available){let professors=[],statusList=[];response.statuses.forEach((element,index)=>{if(professors.includes(element.full_name)){let profIndex=professors.indexOf(element.full_name),status=0==element.inprogress&&0==element.open;statusList[profIndex]=status?statusList[profIndex]:status}else professors.push(element.full_name),statusList.push("0"===element.inprogress&&"0"===element.open);if(index==response.statuses.length-1){let completeTotal=countOccurrences(statusList,!0);var data=google.visualization.arrayToDataTable([["Incomplete","Complete"],["Incomplete Evaluations",professors.length-completeTotal],["Complete Evaluations",completeTotal]]),options={title:"Evaluation Status Overview",animation:{duration:1e3,easing:"in"},width:"100%",height:"100%",backgroundColor:"transparent",colors:["#7b1113","#014421"],is3D:"true"},chart;new google.visualization.PieChart(document.getElementById("piechart")).draw(data,options)}})}else alertify.error(response.message)}))}